(function(){var b=Ext.lib.Ajax,i=function(j){return typeof j!="undefined"},d=Ext.emptyFn||function(){},a=Object.prototype;Ext.lib.Ajax.Queue=function(j){j=j?(j.name?j:{name:j}):{};Ext.apply(this,j,{name:"q-default",priority:5,FIFO:true,callback:null,scope:null,suspended:false,progressive:false});this.requests=new Array();this.pending=false;this.priority=this.priority>9?9:(this.priority<0?0:this.priority)};Ext.extend(Ext.lib.Ajax.Queue,Object,{add:function(j){var k=b.events?b.fireEvent("beforequeue",this,j):true;if(k!==false){this.requests.push(j);this.pending=true;b.pendingRequests++;this.manager&&this.manager.start()}},suspended:false,activeRequest:null,next:function(j){var k=j?this.requests[this.FIFO?"first":"last"]():this.requests[this.FIFO?"shift":"pop"]();if(this.requests.length==0){this.pending=false;Ext.isFunction(this.callback)&&this.callback.call(this.scope||null,this);b.events&&b.fireEvent("queueempty",this)}return k||null},clear:function(){this.suspend();b.pendingRequests-=this.requests.length;this.requests.length=0;this.pending=false;this.resume();this.next()},suspend:function(){this.suspended=true},resume:function(){this.suspended=false},requestNext:function(j){var k;this.activeRequest=null;if(!this.suspended&&(k=this.next(j))){if(k.active){this.activeRequest=b.request.apply(b,k);b.pendingRequests--}else{return this.requestNext(j)}}return this.activeRequest}});Ext.lib.Ajax.QueueManager=function(j){Ext.apply(this,j||{},{quantas:10,priorityQueues:new Array(new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array()),queues:{}})};Ext.extend(Ext.lib.Ajax.QueueManager,Object,{quantas:10,getQueue:function(j){return this.queues[j]},createQueue:function(j){if(!j){return null}var k=new b.Queue(j);k.manager=this;this.queues[k.name]=k;var l=this.priorityQueues[k.priority];l&&l.indexOf(k.name)==-1&&l.push(k.name);return k},removeQueue:function(j){if(j&&(j=this.getQueue(j.name||j))){j.clear();this.priorityQueues[j.priority].remove(j.name);delete this.queues[j.name]}},start:function(){if(!this.started){this.started=true;this.dispatch()}return this},suspendAll:function(){forEach(this.queues,function(j){j.suspend()})},resumeAll:function(){forEach(this.queues,function(j){j.resume()});this.start()},progressive:false,stop:function(){this.started=false;return this},dispatch:function(){var m=this,l=m.queues;var j=(b.activeRequests>b.maxConcurrentRequests);while(b.pendingRequests&&!j){var k=function(p){var o=l[p],n;while(o&&!o.suspended&&o.pending&&o.requestNext()){j||(j=b.activeRequests>b.maxConcurrentRequests);if(j){break}if(o.progressive||m.progressive){break}}if(j){return false}};forEach(this.priorityQueues,function(n){!!n.length&&forEach(n,k,this);j||(j=b.activeRequests>b.maxConcurrentRequests);if(j){return false}},this)}if(b.pendingRequests||j){this.dispatch.defer(this.quantas,this)}else{this.stop()}}});Ext.apply(b,{headers:b.headers||{},defaultPostHeader:b.defaultPostHeader||"application/x-www-form-urlencoded; charset=UTF-8",defaultHeaders:b.defaultHeaders||{},useDefaultXhrHeader:!!b.useDefaultXhrHeader,defaultXhrHeader:"Ext.basex",SCRIPTTAG_POOL:[],_domRefs:[],onUnload:function(){delete b._domRefs;delete b.SCRIPTTAG_POOL},monitoredNode:function(s,m,q,j,r){var k=null,p=(j||window).document,o=p?p.getElementsByTagName("head")[0]:null;if(s&&p&&o){k=s.toUpperCase()=="SCRIPT"&&!!b.SCRIPTTAG_POOL.length?Ext.get(b.SCRIPTTAG_POOL.pop()):null;if(k){k.removeAllListeners()}else{k=Ext.get(p.createElement(s))}var n=Ext.getDom(k);n&&forEach(m||{},function(v,u){v&&(u in n)&&n.setAttribute(u,v)});if(q){var l=(q.success||q).createDelegate(q.scope||null,[q||{}],0);Ext.isIE?k.on("readystatechange",function(){this.dom.readyState=="loaded"&&l()}):k.on("load",l)}r||n.parentNode||o.appendChild(n)}b._domRefs.push(k);return k},poll:{},pollInterval:b.pollInterval||50,queueManager:new b.QueueManager(),queueAll:false,activeRequests:0,pendingRequests:0,maxConcurrentRequests:Ext.isIE?Ext.value(window.maxConnectionsPerServer,2):4,forceActiveX:false,async:true,createXhrObject:function(r,s){var o={status:{isError:false},tId:r},n=null;s||(s={});try{s.xdomain&&window.XDomainRequest&&(o.conn=new XDomainRequest());if(!i(o.conn)&&Ext.capabilities.hasActiveX&&!!Ext.value(s.forceActiveX,this.forceActiveX)){throw ("IE7forceActiveX")}o.conn||(o.conn=new XMLHttpRequest())}catch(k){var j=Ext.capabilities.hasActiveX?(s.multiPart?this.activeXMultipart:this.activeX):null;if(j){for(var p=0,m=j.length;p<m;++p){try{o.conn=new ActiveXObject(j[p]);break}catch(q){n=(k=="IE7forceActiveX"?q:k)}}}}finally{o.status.isError=!i(o.conn);o.status.error=n}return o},createExceptionObject:function(n,m,k,j,l){return{tId:n,status:k?-1:0,statusText:k?"transaction aborted":"communication failure",isAbort:k,isTimeout:j,argument:m}},encoder:encodeURIComponent,serializeForm:function(){var l=/select-(one|multiple)/i,j=/file|undefined|reset|button/i,k=/radio|checkbox/i;return function(n){var o=n.elements||(document.forms[n]||Ext.getDom(n)).elements,v=false,u=this.encoder,r,w,m,p,q="",s;forEach(o,function(x){m=x.name;s=x.type;if(!x.disabled&&m){if(l.test(s)){forEach(x.options,function(y){if(y.selected){q+=String.format("{0}={1}&",u(m),u(y.hasAttribute&&y.hasAttribute("value")&&y.getAttribute("value")!==null?y.value:y.text))}})}else{if(!j.test(s)){if(!(k.test(s)&&!x.checked)&&!(s=="submit"&&v)){q+=u(m)+"="+u(x.value)+"&";v=/submit/i.test(s)}}}}});return q.substr(0,q.length-1)}}(),getHttpStatus:function(l,k,j){var n={status:0,statusText:"",isError:false,isLocal:false,isOK:true,error:null,isAbort:!!k,isTimeout:!!j};try{if(!l||!("status" in l)){throw ("noobj")}n.status=l.status;n.readyState=l.readyState;n.isLocal=(!l.status&&location.protocol=="file:")||(Ext.isSafari&&!i(l.status));n.isOK=(n.isLocal||(n.status==304||n.status==1223||(n.status>199&&n.status<300)));n.statusText=l.statusText||""}catch(m){}return n},handleTransactionResponse:function(n,p,l,k){p=p||{};var m=null;n.isPart||b.activeRequests--;if(!n.status.isError){n.status=this.getHttpStatus(n.conn,l,k);m=this.createResponseObject(n,p.argument,l,k)}n.isPart||this.releaseObject(n);n.status.isError&&(m=Ext.apply({},m||{},this.createExceptionObject(n.tId,p.argument,!!l,!!k,n.status.error)));m.options=n.options;m.fullStatus=n.status;if(!this.events||this.fireEvent("status:"+n.status.status,n.status.status,n,m,p,l)!==false){if(n.status.isOK&&!n.status.isError){if(!this.events||this.fireEvent("response",n,m,p,l,k)!==false){var j=n.isPart?"onpart":"success";Ext.isFunction(p[j])&&p[j].call(p.scope||null,m)}}else{if(!this.events||this.fireEvent("exception",n,m,p,l,k,m.fullStatus.error)!==false){Ext.isFunction(p.failure)&&p.failure.call(p.scope||null,m,m.fullStatus.error)}}}return m},releaseObject:function(j){j&&(j.conn=null);if(j&&Ext.value(j.tId,-1)+1){if(this.poll[j.tId]){window.clearInterval(this.poll[j.tId]);delete this.poll[j.tId]}if(this.timeout[j.tId]){window.clearInterval(this.timeout[j.tId]);delete this.timeout[j.tId]}}},decodeJSON:Ext.decode,reCtypeJSON:/(application|text)\/json/i,reCtypeXML:/(application|text)\/xml/i,createResponseObject:function(x,z,m,n){var B="content-type",p={responseXML:null,responseText:"",responseStream:null,responseJSON:null,contentType:null,getResponseHeader:d,getAllResponseHeaders:d};var k={},l="";if(m!==true){try{p.responseJSON=x.conn.responseJSON||null;p.responseStream=x.conn.responseStream||null;p.contentType=x.conn.contentType||null;p.responseText=x.conn.responseText}catch(C){x.status.isError=true;x.status.error=C}try{p.responseXML=x.conn.responseXML||null}catch(A){}try{l=("getAllResponseHeaders" in x.conn?x.conn.getAllResponseHeaders():null)||"";var r;l.split("\n").forEach(function(o){(r=o.split(":"))&&r.first()&&(k[r.first().trim().toLowerCase()]=(r.last()||"").trim())})}catch(y){x.status.isError=true;x.status.error=y}finally{p.contentType=p.contentType||k[B]||""}if((x.status.isLocal||x.proxied)&&typeof p.responseText=="string"){x.status.isOK=!x.status.isError&&((x.status.status=(!!p.responseText.length)?200:404)==200);if(x.status.isOK&&((!p.responseXML&&this.reCtypeXML.test(p.contentType))||(p.responseXML&&p.responseXML.childNodes.length===0))){var D=null;try{if(Ext.capabilities.hasActiveX){D=new ActiveXObject("MSXML2.DOMDocument.3.0");D.async=false;D.loadXML(p.responseText)}else{var u=null;try{u=new DOMParser();D=u.parseFromString(p.responseText,"application/xml")}catch(j){}finally{u=null}}}catch(w){x.status.isError=true;x.status.error=w}p.responseXML=D}if(p.responseXML){var v=(p.responseXML.documentElement&&p.responseXML.documentElement.nodeName=="parsererror")||(p.responseXML.parseError||0)!==0||p.responseXML.childNodes.length===0;v||(p.contentType=k[B]=p.responseXML.contentType||"text/xml")}}if(x.options.isJSON||(this.reCtypeJSON&&this.reCtypeJSON.test(k[B]||""))){try{Ext.isObject(p.responseJSON)||(p.responseJSON=Ext.isFunction(this.decodeJSON)&&Ext.isString(p.responseText)?this.decodeJSON(p.responseText):null)}catch(q){x.status.isError=true;x.status.error=q}}}x.status.proxied=!!x.proxied;Ext.apply(p,{tId:x.tId,status:x.status.status,statusText:x.status.statusText,contentType:p.contentType||k[B],getResponseHeader:function(o){return k[(o||"").trim().toLowerCase()]},getAllResponseHeaders:function(){return l},fullStatus:x.status,isPart:x.isPart||false});x.parts&&!x.isPart&&(p.parts=x.parts);i(z)&&(p.argument=z);return p},setDefaultPostHeader:function(j){this.defaultPostHeader=j||""},setDefaultXhrHeader:function(j){this.useDefaultXhrHeader=j||false},request:function(j,l,n,p,x){var u=x=Ext.apply({async:this.async||false,headers:false,userId:null,password:null,xmlData:null,jsonData:null,queue:null,proxied:false,multiPart:false,xdomain:false},x||{});var s;if(n.argument&&n.argument.options&&n.argument.options.request&&(s=n.argument.options.request.arg)){Ext.apply(u,{async:u.async||s.async,proxied:u.proxied||s.proxied,multiPart:u.multiPart||s.multiPart,xdomain:u.xdomain||s.xdomain,queue:u.queue||s.queue,onPart:u.onPart||s.onPart})}if(!this.events||this.fireEvent("request",j,l,n,p,u)!==false){if(!u.queued&&(u.queue||(u.queue=this.queueAll||null))){u.queue===true&&(u.queue={name:"q-default"});var r=u.queue;var m=r.name||r,w=this.queueManager;var k=w.getQueue(m)||w.createQueue(r);u.queue=k;u.queued=true;var v=[j,l,n,p,u];v.active=true;k.add(v);return{tId:this.transactionId++,queued:true,request:v,options:u}}x.onpart&&(n.onpart||(n.onpart=Ext.isFunction(x.onpart)?x.onpart.createDelegate(x.scope):null));u.headers&&forEach(u.headers,function(y,q){this.initHeader(q,y,false)},this);var o;if(o=(this.headers?this.headers["Content-Type"]||null:null)){delete this.headers["Content-Type"]}if(u.xmlData){o||(o="text/xml");j="POST";p=u.xmlData}else{if(u.jsonData){o||(o="application/json; charset=utf-8");j="POST";p=(Ext.isArray(u.jsonData)||Ext.isObject(u.jsonData))?Ext.encode(u.jsonData):u.jsonData}}if(p){o||(o=this.useDefaultHeader?this.defaultPostHeader:null);o&&this.initHeader("Content-Type",o,false)}return this.makeRequest(u.method||j,l,n,p,u)}return null},getConnectionObject:function(l,j,n){var p,m;var q=this.transactionId;j||(j={});try{if(m=j.proxied){p={tId:q,status:{isError:false},proxied:true,conn:{el:null,send:function(r){var s=(m.target||window).document,o=s.getElementsByTagName("head")[0];if(o&&this.el){o.appendChild(this.el.dom);this.readyState=2}},abort:function(){this.readyState=0;window[p.cbName]=undefined;Ext.isIE||delete window[p.cbName];var o=Ext.getDom(this.el);if(this.el){this.el.removeAllListeners();if(!p.debug){if(Ext.isIE){b.SCRIPTTAG_POOL.push(this.el)}else{this.el.remove();if(o){for(var r in o){delete o[r]}}}}}this.el=o=null},_headers:{},getAllResponseHeaders:function(){var o=[];forEach(this._headers,function(s,r){s&&o.push(r+": "+s)});return o.join("\n")},getResponseHeader:function(o){return this._headers[String(o).toLowerCase()]||""},onreadystatechange:null,onload:null,readyState:0,status:0,responseText:null,responseXML:null,responseJSON:null},debug:m.debug,params:Ext.isString(j.params)?Ext.urlDecode(j.params):j.params||{},cbName:m.callbackName||"basexCallback"+q,cbParam:m.callbackParam||null};window[p.cbName]=p.cb=function(o){o&&typeof(o)=="object"&&(this.responseJSON=o);this.responseText=o||null;this.status=!!o?200:404;this.abort();this.readyState=4;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange();Ext.isFunction(this.onload)&&this.onload()}.createDelegate(p.conn);p.conn.open=function(){if(p.cbParam){p.params[p.cbParam]=p.cbName}var o=Ext.urlEncode(Ext.apply(Ext.urlDecode(n)||{},p.params,l.indexOf("?")>-1?Ext.urlDecode(l.split("?").last()):false));p.uri=o?l.split("?").first()+"?"+o:l;this.el=b.monitoredNode(m.tag||"script",{type:m.contentType||"text/javascript",src:p.uri,charset:m.charset||j.charset||null},null,m.target,true);this._headers["content-type"]=this.el.dom.type;this.readyState=1;Ext.isFunction(this.onreadystatechange)&&this.onreadystatechange()};j.async=true}else{p=this.createXhrObject(q,j)}if(p){this.transactionId++}}catch(k){p&&(p.status.isError=!!(p.status.error=k))}finally{return p}},makeRequest:function(s,m,q,j,k){var p;if(p=this.getConnectionObject(m,k,j)){p.options=k;var l=p.conn;try{if(p.status.isError){throw p.status.error}b.activeRequests++;l.open(s.toUpperCase(),m,k.async,k.userId,k.password);("onreadystatechange" in l)&&(l.onreadystatechange=this.onStateChange.createDelegate(this,[p,q,"readystate"],0));("onload" in l)&&(l.onload=this.onStateChange.createDelegate(this,[p,q,"load",4],0));("onprogress" in l)&&(l.onprogress=this.onStateChange.createDelegate(this,[p,q,"progress"],0));if(q&&q.timeout){("timeout" in l)&&(l.timeout=q.timeout);("ontimeout" in l)&&(l.ontimeout=this.abort.createDelegate(this,[p,q,true],0));("ontimeout" in l)||(k.async&&(this.timeout[p.tId]=window.setInterval(function(){b.abort(p,q,true)},q.timeout)))}if(this.useDefaultXhrHeader&&!k.xdomain){this.defaultHeaders["X-Requested-With"]||this.initHeader("X-Requested-With",this.defaultXhrHeader,true)}this.setHeaders(p);if(!this.events||this.fireEvent("beforesend",p,s,m,q,j,k)!==false){l.send(j||null)}}catch(n){p.status.isError=true;p.status.error=n}if(p.status.isError){return Ext.apply(p,this.handleTransactionResponse(p,q))}k.async||this.onStateChange(p,q,"load");return p}},abort:function(k,l,j){k&&Ext.apply(k.status,{isAbort:!!!j,isTimeout:!!j,isError:!!j||!!k.status.isError});if(k&&k.queued&&k.request){k.request.active=k.queued=false;this.events&&this.fireEvent("abort",k,l);return true}else{if(k&&this.isCallInProgress(k)){if(!this.events||this.fireEvent(j?"timeout":"abort",k,l)!==false){("abort" in k.conn)&&k.conn.abort();this.handleTransactionResponse(k,l,k.status.isAbort,k.status.isTimeout)}return true}}return false},isCallInProgress:function(j){if(j&&j.conn){if("readyState" in j.conn&&{0:true,4:true}[j.conn.readyState]){return false}return true}return false},clearAuthenticationCache:function(j){try{if(Ext.isIE){document.execCommand("ClearAuthenticationCache")}else{var k;if(k=new XMLHttpRequest()){k.open("GET",j||"/@@",true,"logout","logout");k.send("");k.abort.defer(100,k)}}}catch(l){}},initHeader:function(j,k){(this.headers=this.headers||{})[j]=k},onStateChange:function(n,y,w){if(!n.conn||n.status.isTimeout||n.status.isError){return}var k=n.conn,u=("readyState" in k?k.readyState:0);if(w==="load"||u>2){var x;try{x=k.contentType||k.getResponseHeader("Content-Type")||""}catch(q){}if(x&&/multipart\//i.test(x)){var j=null,m=x.split('"')[1],v="--"+m;n.multiPart=true;try{j=k.responseText}catch(s){}var l=j?j.split(v):null;if(l){n.parts||(n.parts=[]);l.shift();l.pop();forEach(Array.slice(l,n.parts.length),function(o){var r=o.split("\n\n");var p=(r[0]?r[0]:"")+"\n";n.parts.push(this.handleTransactionResponse(Ext.apply(Ext.clone(n),{boundary:m,conn:{status:200,responseText:(r[1]||"").trim(),getAllResponseHeaders:function(){return p.split("\n").filter(function(z){return !!z}).join("\n")}},isPart:true}),y))},this)}}}(u===4||w==="load")&&b.handleTransactionResponse(n,y);this.events&&this.fireEvent.apply(this,["readystatechange"].concat(Array.slice(arguments,0)))},setHeaders:function(j){if(j.conn&&"setRequestHeader" in j.conn){this.defaultHeaders&&forEach(this.defaultHeaders,function(l,k){j.conn.setRequestHeader(k,l)});this.headers&&forEach(this.headers,function(l,k){j.conn.setRequestHeader(k,l)})}this.headers={};this.hasHeaders=false},resetDefaultHeaders:function(){delete this.defaultHeaders;this.defaultHeaders={};this.hasDefaultHeaders=false},activeXMultipart:["MSXML2.XMLHTTP.6.0","MSXML3.XMLHTTP"],activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]});if(Ext.util.Observable){Ext.apply(b,{events:{request:true,beforesend:true,response:true,exception:true,abort:true,timeout:true,readystatechange:true,beforequeue:true,queue:true,queueempty:true},onStatus:function(j,n,m,l){var k=Array.slice(arguments,1);j=new Array().concat(j||new Array());forEach(j,function(o){o=parseInt(o,10);if(!isNaN(o)){var p="status:"+o;this.events[p]||(this.events[p]=true);this.on.apply(this,[p].concat(k))}},this)},unStatus:function(j,n,m,l){var k=Array.slice(arguments,1);j=new Array().concat(j||new Array());forEach(j,function(o){o=parseInt(o,10);if(!isNaN(o)){var p="status:"+o;this.un.apply(this,[p].concat(k))}},this)}},new Ext.util.Observable());Ext.hasBasex=true}Ext.stopIteration={stopIter:true};Ext.applyIf(Array.prototype,{map:function(k,n){var j=this.length;if(typeof k!="function"){throw new TypeError()}var m=new Array(j);for(var l=0;l<j;++l){l in this&&(m[l]=k.call(n||this,this[l],l,this))}return m},some:function(m){var n=Ext.isFunction(m)?m:function(){};var k=0,j=this.length,o=false;while(k<j&&!(o=!!n(this[k++]))){}return o},every:function(m){var n=Ext.isFunction(m)?m:function(){};var k=0,j=this.length,o=true;while(k<j&&(o=!!n(this[k++]))){}return o},include:function(m,k){if(!k&&typeof this.indexOf=="function"){return this.indexOf(m)!=-1}var l=false;try{this.forEach(function(o,n){if(l=(k?(o.include?o.include(m,k):(o===m)):o===m)){throw Ext.stopIteration}})}catch(j){if(j!=Ext.stopIteration){throw j}}return l},filter:function(l,k){var j=new Array();l||(l=function(m){return m});this.forEach(function(n,m){l.call(k,n,m)&&j.push(n)});return j},compact:function(k){var j=new Array();this.forEach(function(l){(l===null||l===undefined)||j.push(k&&Ext.isArray(l)?l.compact():l)},this);return j},flatten:function(){var j=new Array();this.forEach(function(k){Ext.isArray(k)?(j=j.concat(k)):j.push(k)},this);return j},indexOf:function(l){for(var k=0,j=this.length;k<j;++k){if(this[k]==l){return k}}return -1},lastIndexOf:function(k){var j=this.length-1;while(j>-1&&this[j]!=k){j--}return j},unique:function(k,l){var j=new Array();this.forEach(function(n,m){if(0==m||(k?j.last()!=n:!j.include(n,l))){j.push(n)}},this);return j},grep:function(n,m,l){var j=new Array();m||(m=function(o){return o});var k=l?m.createDelegate(l):m;if(typeof n=="string"){n=new RegExp(n)}n instanceof RegExp&&this.forEach(function(p,o){n.test(p)&&j.push(k(p,o))});return j},first:function(){return this[0]},last:function(){return this[this.length-1]},clear:function(){this.length=0},atRandom:function(k){var j=Math.floor(Math.random()*this.length);return this[j]||k},clone:function(j){if(!j){return this.concat()}var l=this.length||0,k=new Array(l);while(l--){k[l]=Ext.clone(this[l],true)}return k},forEach:function(k,j){Array.forEach(this,k,j)},reversed:function(){var k=this.length||0,j=[];while(k--){j.push(this[k])}return j}});window.forEach=function(k,n,l,j){l=l||k;if(k){if(typeof n!="function"){throw new TypeError()}var m=Object;if(k instanceof Function){m=Function}else{if(k.forEach instanceof Function){return k.forEach(n,l)}else{if(typeof k=="string"){m=String}else{if(Ext.isNumber(k.length)){m=Array}}}}return m.forEach(k,n,l,j)}};Ext.clone=function(k,j){if(k===null||k===undefined){return k}if(Ext.isFunction(k.clone)){return k.clone(j)}else{if(Ext.isFunction(k.cloneNode)){return k.cloneNode(j)}}var l={};forEach(k,function(n,m,o){l[m]=(n===o?l:j?Ext.clone(n,true):n)},k,j);return l};var h=Array.prototype.slice;var e=Array.prototype.filter;Ext.applyIf(Array,{slice:function(j){return h.apply(j,h.call(arguments,1))},filter:function(l,k){var j=l&&typeof l=="string"?l.split(""):[];return e.call(j,k)},forEach:function(o,n,m){if(typeof n!="function"){throw new TypeError()}for(var k=0,j=o.length>>>0;k<j;++k){(k in o)&&n.call(m||null,o[k],k,o)}}});Ext.applyIf(RegExp.prototype,{clone:function(){return new RegExp(this)}});Ext.applyIf(Date.prototype,{clone:function(j){return j?new Date(this.getTime()):this}});Ext.applyIf(Boolean.prototype,{clone:function(){return this===true}});Ext.applyIf(Number.prototype,{times:function(m,k){var l=parseInt(this,10)||0;for(var j=1;j<=l;){m.call(k,j++)}},forEach:function(){this.times.apply(this,arguments)},clone:function(){return(this)+0}});Ext.applyIf(String.prototype,{trim:function(){var j=/^\s+|\s+$/g;return function(){return this.replace(j,"")}}(),trimRight:function(){var j=/^|\s+$/g;return function(){return this.replace(j,"")}}(),trimLeft:function(){var j=/^\s+|$/g;return function(){return this.replace(j,"")}}(),clone:function(){return String(this)+""},forEach:function(k,j){String.forEach(this,k,j)}});var c=function(p,n){var o=typeof p=="function"?p:function(){};var m=o._ovl;if(!m){m={base:o};m[o.length||0]=o;o=function(){var r=arguments.callee._ovl;var l=r[arguments.length]||r.base;return l&&l!=arguments.callee?l.apply(this,arguments):undefined}}var q=[].concat(n);for(var k=0,j=q.length;k<j;++k){m[q[k].length]=q[k]}o._ovl=m;return o};Ext.apply(Ext,{overload:c(c,[function(j){return c(null,j)},function(l,k,j){return l[k]=c(l[k],j)}]),isIterable:function(j){if(Ext.isArray(j)||j.callee){return true}if(/NodeList|HTMLCollection/.test(a.toString.call(j))){return true}return(typeof j.nextNode!="undefined"||j.item)&&Ext.isNumber(j.length)},isArray:function(j){return a.toString.apply(j)=="[object Array]"},isObject:function(j){return !!j&&a.toString.apply(j)=="[object Object]"},isNumber:function(j){return typeof j=="number"&&isFinite(j)},isBoolean:function(j){return typeof j=="boolean"},isDocument:function(j){return a.toString.apply(j)=="[object HTMLDocument]"||(j&&j.nodeType===9)},isElement:function(j){if(j){var k=j.dom||j;return !!k.tagName||(/\[object html/i).test(a.toString.apply(k))}return false},isEvent:function(j){return a.toString.apply(j)=="[object Event]"||(Ext.isObject(j)&&!Ext.type(j.constructor)&&(window.event&&j.clientX&&j.clientX===window.event.clientX))},isFunction:function(j){return a.toString.apply(j)=="[object Function]"},isString:function(j){return typeof j=="string"},isPrimitive:function(j){return Ext.isString(j)||Ext.isNumber(j)||Ext.isBoolean(j)},isDefined:i});Ext.ns("Ext.capabilities");var g=Ext.capabilities;Ext.apply(g,{hasActiveX:i(window.ActiveXObject),hasXDR:function(){return i(window.XDomainRequest)||(i(window.XMLHttpRequest)&&"withCredentials" in new XMLHttpRequest())}(),hasChromeFrame:function(){try{if(i(window.ActiveXObject)&&!!(new ActiveXObject("ChromeTab.ChromeFrame"))){return true}}catch(j){}var k=navigator.userAgent.toLowerCase();return !!(k.indexOf("chromeframe")>=0||k.indexOf("x-clock")>=0)}(),hasFlash:(function(){if(i(window.ActiveXObject)){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return true}catch(m){}return false}else{if(navigator.plugins){for(var j=0,l=navigator.plugins,k=l.length;j<k;++j){if((/flash/i).test(l[j].name)){return true}}return false}}return false})(),hasCookies:Ext.isIE&&("dialogArguments" in window)?false:!!navigator.cookieEnabled,hasCanvas:!!document.createElement("canvas").getContext,hasCanvasText:function(){return !!(this.hasCanvas&&typeof document.createElement("canvas").getContext("2d").fillText=="function")}(),hasSVG:!!(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").width),hasXpath:!!document.evaluate,hasWorkers:i(window.Worker)||g.hasGears,hasOffline:i(window.applicationCache),hasLocalStorage:i(window.localStorage),hasGeoLocation:i(navigator.geolocation),hasBasex:true,hasAudio:function(){var l=!!document.createElement("audio").canPlayType,m=("Audio" in window)?new Audio(""):{},n=l||("canPlayType" in m)?{tag:l,object:("play" in m),testMime:function(p){var q;return(q=m.canPlayType?m.canPlayType(p):"no")!=="no"&&q!==""}}:false,o,k,j={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/x-wav",basic:"audio/basic",aif:"audio/x-aiff"};if(n&&n.testMime){for(k in j){n[k]=n.testMime(j[k])}}return n}(),hasVideo:function(){var l=!!document.createElement("video").canPlayType,n=l?document.createElement("video"):{},m=("canPlayType" in n)?{tag:l,testCodec:function(p){var q;return(q=n.canPlayType?n.canPlayType(p):"no")!=="no"&&q!==""}}:false,o,j,k={mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',ogg:'video/ogg; codecs="theora, vorbis"'};if(m&&m.testCodec){for(j in k){m[j]=m.testCodec(k[j])}}return m}(),hasInputAutoFocus:function(){return("autofocus" in (document.createElement("input")))}(),hasInputPlaceHolder:function(){return("placeholder" in (document.createElement("input")))}(),hasInputType:function(k){var j=document.createElement("input");if(j){try{j.setAttribute("type",k)}catch(l){}return j.type!=="text"}return false},isEventSupported:function(){var l={select:"input",change:"input",submit:"form",reset:"form",load:"img",error:"img",abort:"img"};var j={},m=/^on/i,k=function(p,o){var n=Ext.getDom(o);return(n?(Ext.isElement(n)||Ext.isDocument(n)?n.nodeName.toLowerCase():o.self?"#window":o||"#object"):o||"div")+":"+p};return function(r,u){r=(r||"").replace(m,"");var s,q=false;var o="on"+r;var n=(u?u:l[r])||"div";var p=k(r,n);if(p in j){return j[p]}s=Ext.isString(n)?document.createElement(n):u;q=(!!s&&(o in s));q||(q=window.Event&&!!(String(r).toUpperCase() in window.Event));if(!q&&s){s.setAttribute&&s.setAttribute(o,"return;");q=Ext.isFunction(s[o])}j[p]=q;s=null;return q}}()});Ext.EventManager.on(window,"beforeunload",b.onUnload,b,{single:true})})();Ext.applyIf(Function.prototype,{forEach:function(a,e,d,c){if(a){var b;for(b in a){(!!c||a.hasOwnProperty(b))&&e.call(d||a,a[b],b,a)}}},createBuffered:function(a,c){var d=this,b=new Ext.util.DelayedTask();return function(){b.delay(a,d,c,Array.slice(arguments,0))}},createDelayed:function(c,d,b,a){var e=(d||b)?this.createDelegate(d,b,a):this;return c?function(){setTimeout(e,c)}:e},clone:function(a){return this}});Ext.ComponentMgr.create=Ext.ComponentMgr.create.createInterceptor(function(a,c){var b=a.xtype||c;if(!Ext.ComponentMgr.isRegistered(b)){Ext.MessageBox.wait("Loading Panel","Please Wait...");Ext.app.CodeLoader.load({async:false,disableCaching:true,method:"GET"},"/js/getXtype/"+b);Ext.MessageBox.hide()}});Ext.override(Ext.data.HttpProxy,{setMethod:function(c,a){var b=this.conn.method;this.conn.method=c;if(!a){this.on("load",function(){this.conn.method=b},this,{single:true})}}});Ext.override(Ext.form.TextField,{initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress","reset")},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.fireEvent("reset");this.applyEmptyText()}});Ext.override(Ext.grid.GridPanel,{getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}else{Ext.apply(this.view,this.viewConfig)}return this.view}});Ext.namespace("Ext.ux.form");Ext.ux.form.IsEmptyCheckbox=Ext.extend(Ext.form.Checkbox,{inputValue:"true",hideLabel:true,onRender:function(b,a){Ext.form.Checkbox.superclass.onRender.call(this,b,a);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:"x-form-check-wrap"}).setStyle({paddingLeft:"5px",marginTop:"-10px"});if(this.boxLabel){this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIE){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap;this.sibling=this.previousSibling()},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked);if(this.checked&&this.sibling){this.sibling.reset();if(this.sibling.hasListener("focus")){this.sibling.removeListener("focus",this.reset,this)}this.sibling.on("focus",this.reset,this,{single:true})}if(this.ownerCt&&this.ownerCt.buttons){this.ownerCt.buttons[0].handler.call(this.ownerCt)}}},reset:Ext.form.Field.prototype.reset.createSequence(function(){this.originalValue=this.defaultValue;this.setValue(this.defaultValue)})});Ext.ComponentMgr.registerType("isemptycheckbox",Ext.ux.form.IsEmptyCheckbox);Ext.ux.form.ItemSelector=Ext.extend(Ext.form.Field,{hideNavIcons:false,imagePath:"/ExtjsGeneratorPlugin/Ext.ux.IconMgr/icons",iconUp:"control-090.png",iconDown:"control-270.png",iconLeft:"control-180.png",iconRight:"control.png",iconTop:"control-stop-090.png",iconBottom:"control-stop-270.png",drawUpIcon:false,drawDownIcon:false,drawLeftIcon:true,drawRightIcon:true,drawTopIcon:false,drawBotIcon:false,delimiter:",",bodyStyle:null,border:false,defaultAutoCreate:{tag:"div"},delimiter:",",multiselects:null,initComponent:function(){Ext.ux.form.ItemSelector.superclass.initComponent.call(this);this.addEvents({rowdblclick:true,change:true})},onRender:function(d,a){Ext.ux.form.ItemSelector.superclass.onRender.call(this,d,a);var i=[{legend:"Available",draggable:true,droppable:true,width:200,height:200},{legend:"Selected",droppable:true,draggable:true,width:200,height:200}];this.fromMultiselect=new Ext.ux.form.MultiSelect(Ext.applyIf(this.multiselects[0],i[0]));this.fromMultiselect.on("dblclick",this.onRowDblClick,this);this.toMultiselect=new Ext.ux.form.MultiSelect(Ext.applyIf(this.multiselects[1],i[1]));this.toMultiselect.on("dblclick",this.onRowDblClick,this);var h=new Ext.Panel({bodyStyle:this.bodyStyle,border:this.border,layout:"table",width:this.fromMultiselect.width+this.toMultiselect.width+20,layoutConfig:{columns:3}});h.add(this.fromMultiselect);var c=new Ext.Panel({header:false});h.add(c);h.add(this.toMultiselect);h.render(this.el);c.el.down("."+c.bwrapCls).remove();if(this.imagePath!=""&&this.imagePath.charAt(this.imagePath.length-1)!="/"){this.imagePath+="/"}this.iconUp=this.imagePath+(this.iconUp||"control-090.png");this.iconDown=this.imagePath+(this.iconDown||"control-270.png");this.iconLeft=this.imagePath+(this.iconLeft||"control-180.png");this.iconRight=this.imagePath+(this.iconRight||"control.png");this.iconTop=this.imagePath+(this.iconTop||"control-stop-090.png");this.iconBottom=this.imagePath+(this.iconBottom||"control-stop-270.png");var g=c.getEl();this.toTopIcon=g.createChild({tag:"img",src:this.iconTop,style:{cursor:"pointer",margin:"2px"}});g.createChild({tag:"br"});this.upIcon=g.createChild({tag:"img",src:this.iconUp,style:{cursor:"pointer",margin:"2px"}});g.createChild({tag:"br"});this.addIcon=g.createChild({tag:"img",src:this.iconRight,style:{cursor:"pointer",margin:"2px"}});g.createChild({tag:"br"});this.removeIcon=g.createChild({tag:"img",src:this.iconLeft,style:{cursor:"pointer",margin:"2px"}});g.createChild({tag:"br"});this.downIcon=g.createChild({tag:"img",src:this.iconDown,style:{cursor:"pointer",margin:"2px"}});g.createChild({tag:"br"});this.toBottomIcon=g.createChild({tag:"img",src:this.iconBottom,style:{cursor:"pointer",margin:"2px"}});this.toTopIcon.on("click",this.toTop,this);this.upIcon.on("click",this.up,this);this.downIcon.on("click",this.down,this);this.toBottomIcon.on("click",this.toBottom,this);this.addIcon.on("click",this.fromTo,this);this.removeIcon.on("click",this.toFrom,this);if(!this.drawUpIcon||this.hideNavIcons){this.upIcon.dom.style.display="none"}if(!this.drawDownIcon||this.hideNavIcons){this.downIcon.dom.style.display="none"}if(!this.drawLeftIcon||this.hideNavIcons){this.addIcon.dom.style.display="none"}if(!this.drawRightIcon||this.hideNavIcons){this.removeIcon.dom.style.display="none"}if(!this.drawTopIcon||this.hideNavIcons){this.toTopIcon.dom.style.display="none"}if(!this.drawBotIcon||this.hideNavIcons){this.toBottomIcon.dom.style.display="none"}var b=h.body.first();this.el.setWidth(h.body.first().getWidth());h.body.removeClass();this.hiddenName=this.name;var e={tag:"input",type:"hidden",value:"",name:this.name};this.hiddenField=this.el.createChild(e)},doLayout:function(){if(this.rendered){this.fromMultiselect.fs.doLayout();this.toMultiselect.fs.doLayout()}},afterRender:function(){Ext.ux.form.ItemSelector.superclass.afterRender.call(this);this.toStore=this.toMultiselect.store;this.toStore.on("add",this.valueChanged,this);this.toStore.on("remove",this.valueChanged,this);this.toStore.on("load",this.valueChanged,this);this.valueChanged(this.toStore)},toTop:function(){var c=this.toMultiselect.view.getSelectedIndexes();var a=[];if(c.length>0){c.sort();for(var b=0;b<c.length;b++){record=this.toMultiselect.view.store.getAt(c[b]);a.push(record)}c=[];for(var b=a.length-1;b>-1;b--){record=a[b];this.toMultiselect.view.store.remove(record);this.toMultiselect.view.store.insert(0,record);c.push(((a.length-1)-b))}}this.toMultiselect.view.refresh();this.toMultiselect.view.select(c)},toBottom:function(){var c=this.toMultiselect.view.getSelectedIndexes();var a=[];if(c.length>0){c.sort();for(var b=0;b<c.length;b++){record=this.toMultiselect.view.store.getAt(c[b]);a.push(record)}c=[];for(var b=0;b<a.length;b++){record=a[b];this.toMultiselect.view.store.remove(record);this.toMultiselect.view.store.add(record);c.push((this.toMultiselect.view.store.getCount())-(a.length-b))}}this.toMultiselect.view.refresh();this.toMultiselect.view.select(c)},up:function(){var a=null;var c=this.toMultiselect.view.getSelectedIndexes();c.sort();var d=[];if(c.length>0){for(var b=0;b<c.length;b++){a=this.toMultiselect.view.store.getAt(c[b]);if((c[b]-1)>=0){this.toMultiselect.view.store.remove(a);this.toMultiselect.view.store.insert(c[b]-1,a);d.push(c[b]-1)}}this.toMultiselect.view.refresh();this.toMultiselect.view.select(d)}},down:function(){var a=null;var c=this.toMultiselect.view.getSelectedIndexes();c.sort();c.reverse();var d=[];if(c.length>0){for(var b=0;b<c.length;b++){a=this.toMultiselect.view.store.getAt(c[b]);if((c[b]+1)<this.toMultiselect.view.store.getCount()){this.toMultiselect.view.store.remove(a);this.toMultiselect.view.store.insert(c[b]+1,a);d.push(c[b]+1)}}this.toMultiselect.view.refresh();this.toMultiselect.view.select(d)}},fromTo:function(){var e=this.fromMultiselect.view.getSelectedIndexes();var b=[];if(e.length>0){for(var d=0;d<e.length;d++){record=this.fromMultiselect.view.store.getAt(e[d]);b.push(record)}if(!this.allowDup){e=[]}for(var d=0;d<b.length;d++){record=b[d];if(this.allowDup){var a=new Ext.data.Record();record.id=a.id;delete a;this.toMultiselect.view.store.add(record)}else{this.fromMultiselect.view.store.remove(record);this.toMultiselect.view.store.add(record);e.push((this.toMultiselect.view.store.getCount()-1))}}}this.toMultiselect.view.refresh();this.fromMultiselect.view.refresh();var c=this.toMultiselect.store.sortInfo;if(c){this.toMultiselect.store.sort(c.field,c.direction)}this.toMultiselect.view.select(e)},toFrom:function(){var d=this.toMultiselect.view.getSelectedIndexes();var a=[];if(d.length>0){for(var c=0;c<d.length;c++){record=this.toMultiselect.view.store.getAt(d[c]);a.push(record)}d=[];for(var c=0;c<a.length;c++){record=a[c];this.toMultiselect.view.store.remove(record);if(!this.allowDup){this.fromMultiselect.view.store.add(record);d.push((this.fromMultiselect.view.store.getCount()-1))}}}this.fromMultiselect.view.refresh();this.toMultiselect.view.refresh();var b=this.fromMultiselect.store.sortInfo;if(b){this.fromMultiselect.store.sort(b.field,b.direction)}this.fromMultiselect.view.select(d)},valueChanged:function(c){var a=null;var b=[];for(var d=0;d<c.getCount();d++){a=c.getAt(d);b.push(a.get(this.toMultiselect.valueField))}this.hiddenField.dom.value=b.join(this.delimiter);this.fireEvent("change",this,this.getValue(),this.hiddenField.dom.value)},getValue:function(){return this.hiddenField.dom.value},setValue:function(d){this.reset();if(!d){return}var c=[];if(!Ext.isArray(d)){d=d.split(this.delimiter)}if(d.length>0){for(var h=0;h<d.length;h++){var g=this.fromMultiselect.view.store.find(this.fromMultiselect.valueField,d[h]);var b=this.fromMultiselect.view.store.getAt(g);if("object"==typeof b){c.push(b)}}if(!this.allowDup){d=[]}for(var h=0;h<c.length;h++){b=c[h];if(this.allowDup){var a=new Ext.data.Record();b.id=a.id;delete a;this.toMultiselect.view.store.add(b)}else{this.fromMultiselect.view.store.remove(b);this.toMultiselect.view.store.add(b);d.push((this.toMultiselect.view.store.getCount()-1))}}}this.toMultiselect.view.refresh();this.fromMultiselect.view.refresh();var e=this.toMultiselect.store.sortInfo;if(e){this.toMultiselect.store.sort(e.field,e.direction)}this.toMultiselect.view.select(d)},setValue:function(g){this.reset();if(!g){return}if(!Ext.isArray(g)){g=g.split(this.delimiter)}var b,e,d,c,h,a;for(c=0;c<g.length;c++){b=this.fromMultiselect.valueField;e=this.fromMultiselect.displayField;h=g[c];a=this.toMultiselect.view.store.findBy(function(i){return i.data[b]==h});if(a!=-1){continue}a=this.fromMultiselect.view.store.findBy(function(i){return i.data[b]==h});d=this.fromMultiselect.view.store.getAt(a);if(d){this.toMultiselect.view.store.add(d);this.fromMultiselect.view.store.remove(d)}}},onRowDblClick:function(c,a,b,d){if(c==this.toMultiselect.view){this.toFrom()}else{if(c==this.fromMultiselect.view){this.fromTo()}}return this.fireEvent("rowdblclick",c,a,b,d)},reset:function(){range=this.toMultiselect.store.getRange();this.toMultiselect.store.removeAll();this.fromMultiselect.store.add(range);var a=this.fromMultiselect.store.sortInfo;if(a){this.fromMultiselect.store.sort(a.field,a.direction)}this.valueChanged(this.toMultiselect.store)}});Ext.reg("itemselector",Ext.ux.form.ItemSelector);Ext.ns("Ext.ux.form");Ext.ux.form.MultiSelect=Ext.extend(Ext.form.Field,{ddReorder:false,appendOnly:false,width:100,height:100,displayField:0,valueField:1,allowBlank:true,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:Ext.form.TextField.prototype.blankText,minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Maximum {0} item(s) allowed",delimiter:",",defaultAutoCreate:{tag:"div"},initComponent:function(){Ext.ux.form.MultiSelect.superclass.initComponent.call(this);if(Ext.isArray(this.store)){if(Ext.isArray(this.store[0])){this.store=new Ext.data.ArrayStore({fields:["value","text"],data:this.store});this.valueField="value"}else{this.store=new Ext.data.ArrayStore({fields:["text"],data:this.store,expandData:true});this.valueField="text"}this.displayField="text"}else{this.store=Ext.StoreMgr.lookup(this.store)}this.addEvents({dblclick:true,click:true,change:true,drop:true})},onRender:function(c,b){Ext.ux.form.MultiSelect.superclass.onRender.call(this,c,b);var a=this.fs=new Ext.form.FieldSet({renderTo:this.el,title:this.legend,height:this.height,width:this.width,style:"padding:0;",tbar:this.tbar,autoScroll:true});a.body.addClass("ux-mselect");this.view=new Ext.ListView({multiSelect:true,store:this.store,columns:[{header:"Value",width:1,dataIndex:this.displayField}],hideHeaders:true});a.add(this.view);this.view.on("click",this.onViewClick,this);this.view.on("beforeclick",this.onViewBeforeClick,this);this.view.on("dblclick",this.onViewDblClick,this);this.hiddenName=this.name||Ext.id();var d={tag:"input",type:"hidden",value:"",name:this.hiddenName};this.hiddenField=this.el.createChild(d);this.hiddenField.dom.disabled=this.hiddenName!=this.name;a.doLayout()},afterRender:function(){Ext.ux.form.MultiSelect.superclass.afterRender.call(this);if(this.ddReorder&&!this.dragGroup&&!this.dropGroup){this.dragGroup=this.dropGroup="MultiselectDD-"+Ext.id()}if(this.draggable||this.dragGroup){this.dragZone=new Ext.ux.form.MultiSelect.DragZone(this,{ddGroup:this.dragGroup})}if(this.droppable||this.dropGroup){this.dropZone=new Ext.ux.form.MultiSelect.DropZone(this,{ddGroup:this.dropGroup})}},onViewClick:function(c,a,b,d){this.fireEvent("change",this,this.getValue(),this.hiddenField.dom.value);this.hiddenField.dom.value=this.getValue();this.fireEvent("click",this,d);this.validate()},onViewBeforeClick:function(c,a,b,d){if(this.disabled){return false}},onViewDblClick:function(c,a,b,d){return this.fireEvent("dblclick",c,a,b,d)},getValue:function(a){var d=[];var c=this.view.getSelectedIndexes();if(c.length==0){return""}for(var b=0;b<c.length;b++){d.push(this.store.getAt(c[b]).get((a!=null)?a:this.valueField))}return d.join(this.delimiter)},setValue:function(a){var b;var d=[];this.view.clearSelections();this.hiddenField.dom.value="";if(!a||(a=="")){return}if(!Ext.isArray(a)){a=a.split(this.delimiter)}for(var c=0;c<a.length;c++){b=this.view.store.indexOf(this.view.store.query(this.valueField,new RegExp("^"+a[c]+"$","i")).itemAt(0));d.push(b)}this.view.select(d);this.hiddenField.dom.value=this.getValue();this.validate()},reset:function(){this.setValue("")},getRawValue:function(a){var b=this.getValue(a);if(b.length){b=b.split(this.delimiter)}else{b=[]}return b},setRawValue:function(a){setValue(a)},validateValue:function(a){if(a.length<1){if(this.allowBlank){this.clearInvalid();return true}else{this.markInvalid(this.blankText);return false}}if(a.length<this.minSelections){this.markInvalid(String.format(this.minSelectionsText,this.minSelections));return false}if(a.length>this.maxSelections){this.markInvalid(String.format(this.maxSelectionsText,this.maxSelections));return false}return true},disable:function(){this.disabled=true;this.hiddenField.dom.disabled=true;this.fs.disable()},enable:function(){this.disabled=false;this.hiddenField.dom.disabled=false;this.fs.enable()},destroy:function(){Ext.destroy(this.fs,this.dragZone,this.dropZone);Ext.ux.form.MultiSelect.superclass.destroy.call(this)}});Ext.reg("multiselect",Ext.ux.form.MultiSelect);Ext.ux.Multiselect=Ext.ux.form.MultiSelect;Ext.ux.form.MultiSelect.DragZone=function(d,c){this.ms=d;this.view=d.view;var b=c.ddGroup||"MultiselectDD";var a;if(Ext.isArray(b)){a=b.shift()}else{a=b;b=null}Ext.ux.form.MultiSelect.DragZone.superclass.constructor.call(this,this.ms.fs.body,{containerScroll:true,ddGroup:a});this.setDraggable(b)};Ext.extend(Ext.ux.form.MultiSelect.DragZone,Ext.dd.DragZone,{onInitDrag:function(a,c){var b=Ext.get(this.dragData.ddel.cloneNode(true));this.proxy.update(b.dom);b.setWidth(b.child("em").getWidth());this.onStartDrag(a,c);return true},collectSelection:function(b){b.repairXY=Ext.fly(this.view.getSelectedNodes()[0]).getXY();var a=0;this.view.store.each(function(d){if(this.view.isSelected(a)){var e=this.view.getNode(a);var c=e.cloneNode(true);c.id=Ext.id();b.ddel.appendChild(c);b.records.push(this.view.store.getAt(a));b.viewNodes.push(e)}a++},this)},onEndDrag:function(a,b){var c=Ext.get(this.dragData.ddel);if(c&&c.hasClass("multi-proxy")){c.remove()}},getDragData:function(d){var c=this.view.findItemFromChild(d.getTarget());if(c){if(!this.view.isSelected(c)&&!d.ctrlKey&&!d.shiftKey){this.view.select(c);this.ms.setValue(this.ms.getValue())}if(this.view.getSelectionCount()==0||d.ctrlKey||d.shiftKey){return false}var b={sourceView:this.view,viewNodes:[],records:[]};if(this.view.getSelectionCount()==1){var a=this.view.getSelectedIndexes()[0];var g=this.view.getNode(a);b.viewNodes.push(b.ddel=g);b.records.push(this.view.store.getAt(a));b.repairXY=Ext.fly(g).getXY()}else{b.ddel=document.createElement("div");b.ddel.className="multi-proxy";this.collectSelection(b)}return b}return false},getRepairXY:function(a){return this.dragData.repairXY},setDraggable:function(a){if(!a){return}if(Ext.isArray(a)){Ext.each(a,this.setDraggable,this);return}this.addToGroup(a)}});Ext.ux.form.MultiSelect.DropZone=function(d,c){this.ms=d;this.view=d.view;var b=c.ddGroup||"MultiselectDD";var a;if(Ext.isArray(b)){a=b.shift()}else{a=b;b=null}Ext.ux.form.MultiSelect.DropZone.superclass.constructor.call(this,this.ms.fs.body,{containerScroll:true,ddGroup:a});this.setDroppable(b)};Ext.extend(Ext.ux.form.MultiSelect.DropZone,Ext.dd.DropZone,{getTargetFromEvent:function(b){var a=b.getTarget();return a},getDropPoint:function(h,k,d){if(k==this.ms.fs.body.dom){return"below"}var g=Ext.lib.Dom.getY(k),a=g+k.offsetHeight;var j=g+(a-g)/2;var i=Ext.lib.Event.getPageY(h);if(i<=j){return"above"}else{return"below"}},isValidDropPoint:function(b,e,a){if(!a.viewNodes||(a.viewNodes.length!=1)){return true}var c=a.viewNodes[0];if(c==e){return false}if((b=="below")&&(e.nextSibling==c)){return false}if((b=="above")&&(e.previousSibling==c)){return false}return true},onNodeEnter:function(d,a,c,b){return false},onNodeOver:function(i,a,h,d){var b=this.dropNotAllowed;var g=this.getDropPoint(h,i,a);if(this.isValidDropPoint(g,i,d)){if(this.ms.appendOnly){return"x-tree-drop-ok-below"}if(g){var c;if(g=="above"){b=i.previousSibling?"x-tree-drop-ok-between":"x-tree-drop-ok-above";c="x-view-drag-insert-above"}else{b=i.nextSibling?"x-tree-drop-ok-between":"x-tree-drop-ok-below";c="x-view-drag-insert-below"}if(this.lastInsertClass!=c){Ext.fly(i).replaceClass(this.lastInsertClass,c);this.lastInsertClass=c}}}return b},onNodeOut:function(d,a,c,b){this.removeDropIndicators(d)},onNodeDrop:function(b,k,j,g){if(this.ms.fireEvent("drop",this,b,k,j,g)===false){return false}var l=this.getDropPoint(j,b,k);if(b!=this.ms.fs.body.dom){b=this.view.findItemFromChild(b)}if(this.ms.appendOnly){insertAt=this.view.store.getCount()}else{insertAt=b==this.ms.fs.body.dom?this.view.store.getCount()-1:this.view.indexOf(b);if(l=="below"){insertAt++}}var c=false;if(g.sourceView==this.view){if(l=="below"){if(g.viewNodes[0]==b){g.viewNodes.shift()}}else{if(g.viewNodes[g.viewNodes.length-1]==b){g.viewNodes.pop()}}if(!g.viewNodes.length){return false}if(insertAt>this.view.store.indexOf(g.records[0])){c="down";insertAt--}}for(var h=0;h<g.records.length;h++){var a=g.records[h];if(g.sourceView){g.sourceView.store.remove(a)}this.view.store.insert(c=="down"?insertAt:insertAt++,a);var d=this.view.store.sortInfo;if(d){this.view.store.sort(d.field,d.direction)}}return true},removeDropIndicators:function(a){if(a){Ext.fly(a).removeClass(["x-view-drag-insert-above","x-view-drag-insert-left","x-view-drag-insert-right","x-view-drag-insert-below"]);this.lastInsertClass="_noclass"}},setDroppable:function(a){if(!a){return}if(Ext.isArray(a)){Ext.each(a,this.setDroppable,this);return}this.addToGroup(a)}});Ext.namespace("Ext.ux");Ext.ux.ComboListAutoSizer=(function(){function a(d){var b=d.view&&d.view.getEl()&&d.view.getEl().child(d.itemSelector||".x-combo-list-item");if(!b){return}var c=Ext.util.TextMetrics.createInstance(b);var e=Math.max(d.minListWidth,d.getWidth());d.getStore().each(function(g){e=Math.max(e,c.getWidth(g.get(d.displayField))+10)});d.list.setWidth(e);d.innerList.setWidth(e-d.list.getFrameWidth("lr"));d.list.alignTo(d.wrap,d.listAlign)}return{init:function(c){c.on("expand",a,null,{single:true});var b=c.getStore();b.on("load",function(){a(c)});b.on("update",function(){a(c)})}}})();Ext.namespace("Ext.ux.form");Ext.ux.form.TwinComboBox=Ext.extend(Ext.form.ComboBox,{getTrigger:Ext.form.TwinTriggerField.prototype.getTrigger,initTrigger:Ext.form.TwinTriggerField.prototype.initTrigger,trigger1Class:"x-form-clear-trigger",hideTrigger1:true,submitOnSelect:true,submitOnClear:true,allowClear:true,defaultValue:null,plugins:[Ext.ux.ComboListAutoSizer],initComponent:function(){Ext.ux.form.TwinComboBox.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},initEvents:function(){Ext.ux.form.TwinComboBox.superclass.initEvents.call(this);this.on({select:{fn:function(){if(this.submitOnSelect&&this.getValue()&&this.ownerCt&&this.ownerCt.buttons){this.ownerCt.buttons[0].handler.call(this.ownerCt)}},scope:this}})},setValue:Ext.form.ComboBox.prototype.setValue.createSequence(function(a){if(this.allowClear){if(a!==null&&a!=""){this.triggers[0].show()}else{this.triggers[0].hide()}}var b=Ext.util.TextMetrics.measure(this.el,this.lastSelectionText).width;if(b>(this.el.getWidth()-20)){this.el.dom.qtip=this.lastSelectionText;this.el.dom.qwidth=b+5;if(Ext.QuickTips){Ext.QuickTips.enable()}}}),findRecord:function(c,b){var a;if(this.store.getCount()>0){this.store.each(function(d){if(d.data[c]==b){a=d}})}return a},reset:Ext.form.Field.prototype.reset.createSequence(function(){this.originalValue=this.defaultValue;this.setValue(this.defaultValue);if(this.allowClear){this.triggers[0].hide()}}),onViewClick:Ext.form.ComboBox.prototype.onViewClick.createSequence(function(){if(this.allowClear){this.triggers[0].show()}}),onTrigger2Click:function(){this.onTriggerClick()},onTrigger1Click:function(){if(!this.disabled){this.clearValue();this.triggers[0].hide();if(this.submitOnClear&&this.ownerCt&&this.ownerCt.buttons){this.ownerCt.buttons[0].handler.call(this.ownerCt)}this.el.dom.qtip=null;this.fireEvent("clear",this)}}});Ext.ComponentMgr.registerType("twincombo",Ext.ux.form.TwinComboBox);Ext.namespace("Ext.ux.form");Ext.ux.form.TwinDateField=Ext.extend(Ext.form.DateField,{submitOnSelect:true,submitOnClear:true,initComponent:function(){Ext.ux.form.TwinDateField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]};this.addEvents("valuechange")},initEvents:function(){Ext.ux.form.TwinDateField.superclass.initEvents.call(this);this.on({select:{fn:function(){if(this.value&&this.ownerCt&&this.ownerCt.buttons&&this.submitOnSelect){this.ownerCt.buttons[0].handler.call(this.ownerCt)}},scope:this},valuechange:{fn:function(){if(this.getValue()&&this.triggers[0]){this.triggers[0].show()}},scope:this}})},getTrigger:Ext.form.TwinTriggerField.prototype.getTrigger,initTrigger:Ext.form.TwinTriggerField.prototype.initTrigger,trigger2Class:"x-form-date-trigger",trigger1Class:"x-form-clear-trigger",hideTrigger1:true,reset:Ext.form.Field.prototype.reset.createSequence(function(){this.originalValue=null;this.setValue(null);this.triggers[0].hide()}),onTrigger2Click:function(){this.onTriggerClick()},onTrigger1Click:function(){if(!this.disabled){this.clearValue();this.triggers[0].hide();if(this.ownerCt&&this.ownerCt.buttons&&this.submitOnClear){this.ownerCt.buttons[0].handler.call(this.ownerCt)}this.fireEvent("clear",this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:Ext.form.DateField.prototype.setValue.createSequence(function(a){if(a!==null&&a!=""){this.triggers[0].show()}else{this.triggers[0].hide()}})});Ext.ComponentMgr.registerType("twindatefield",Ext.ux.form.TwinDateField);Ext.ns("Ext.ux.grid.plugin");Ext.ux.grid.plugin.CheckColumn=function(a){this.editable=false;Ext.apply(this,a);if(!this.id){this.id=Ext.id()}this.renderer=this.renderer.createDelegate(this)};Ext.ux.grid.plugin.CheckColumn.prototype={init:function(a){this.grid=a;this.grid.on("render",function(){var b=this.grid.getView();b.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(d,c){if(Ext.fly(c).hasClass(this.createId())&&this.editable){d.stopEvent();var b=this.grid.getView().findRowIndex(c);var a=this.grid.store.getAt(b);a.set(this.dataIndex,!a.data[this.dataIndex])}},renderer:function(b,c,a){c.css+=" x-grid3-check-col-td";return String.format('<div class="x-grid3-check-col{0} {1}">&#160;</div>',b?"-on":"",this.createId())},createId:function(){return"x-grid3-cc-"+this.id}};Ext.preg("checkcolumn",Ext.ux.grid.plugin.CheckColumn);Ext.ns("Ext.ux.grid.plugin");if("function"!==typeof RegExp.escape){RegExp.escape=function(a){if("string"!==typeof a){return a}return a.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")}}Ext.ux.grid.plugin.RowActions=function(a){Ext.apply(this,a);this.addEvents("beforeaction","action","beforegroupaction","groupaction");Ext.ux.grid.plugin.RowActions.superclass.constructor.call(this)};Ext.extend(Ext.ux.grid.plugin.RowActions,Ext.util.Observable,{actionEvent:"click",autoWidth:true,dataIndex:"",editable:false,header:"",isColumn:true,keepSelection:false,menuDisabled:true,sortable:false,tplGroup:'<tpl for="actions"><div class="ux-grow-action-item<tpl if="\'right\'===align"> ux-action-right</tpl> {cls}" style="{style}" qtip="{qtip}">{text}</div></tpl>',tplRow:'<div class="ux-row-action"><tpl for="actions"><div class="ux-row-action-item {cls} <tpl if="text">ux-row-action-text</tpl>" style="{hide}{style}" qtip="{qtip}"><tpl if="text"><span qtip="{qtip}">{text}</span></tpl></div></tpl></div>',hideMode:"visibility",widthIntercept:4,widthSlope:21,init:function(g){this.grid=g;this.id=this.id||Ext.id();var h=g.getColumnModel().lookup;delete (h[undefined]);h[this.id]=this;if(!this.actions){var e=g.getColumnModel().getIndexById(this.id);var d=g.getColumnModel().config;g.getColumnModel().config=[d[e]];d.splice(e,1);g.getColumnModel().setConfig(d);return}if(!this.tpl){this.tpl=this.processActions(this.actions)}if(this.autoWidth){this.width=this.widthSlope*this.actions.length+this.widthIntercept;this.fixed=true}var c=g.getView();var b={scope:this};b[this.actionEvent]=this.onClick;g.afterRender=g.afterRender.createSequence(function(){c.mainBody.on(b);g.on("destroy",this.purgeListeners,this)},this);if(!this.renderer){this.renderer=function(n,j,k,o,m,l){j.css+=(j.css?" ":"")+"ux-row-action-cell";return this.tpl.apply(this.getData(n,j,k,o,m,l))}.createDelegate(this)}if(c.groupTextTpl&&this.groupActions){c.interceptMouse=c.interceptMouse.createInterceptor(function(j){if(j.getTarget(".ux-grow-action-item")){return false}});c.groupTextTpl='<div class="ux-grow-action-text">'+c.groupTextTpl+"</div>"+this.processActions(this.groupActions,this.tplGroup).apply()}if(true===this.keepSelection){g.processEvent=g.processEvent.createInterceptor(function(j,k){if("mousedown"===j){return !this.getAction(k)}},this)}if(Ext.util.CSS.getRule(".ux-row-action-cell")==null){var a=".ux-row-action-cell .x-grid3-cell-inner {padding: 1px 0 0 0;}.ux-row-action-item {float: left;min-width: 16px;height: 16px;background-repeat: no-repeat;margin: 0 5px 0 0;cursor: pointer;overflow: hidden;}.ext-ie .ux-row-action-item {width: 16px;}.ext-ie .ux-row-action-text {width: auto;}.ux-row-action-item span {vertical-align:middle; padding: 0 0 0 20px;  line-height: 18px;}.ext-ie .ux-row-action-item span {width: auto;}.x-grid-group-hd div {position: relative;height: 16px;}.ux-grow-action-item {min-width: 16px;height: 16px;background-repeat: no-repeat;background-position: 0 50% ! important;margin: 0 0 0 4px;padding: 0 ! important;cursor: pointer;float: left;}.ext-ie .ux-grow-action-item {width: 16px;}.ux-action-right {float: right;margin: 0 3px 0 2px;padding: 0 ! important;}.ux-grow-action-text {padding: 0 ! important;margin: 0 ! important;background: transparent none ! important;float: left;}";var i=Ext.util.CSS.createStyleSheet("/* Ext.ux.grid.plugin.RowActions stylesheet */\n"+a,"RowActions");Ext.util.CSS.refreshCache()}},getData:function(e,a,b,g,d,c){return b.data||{}},processActions:function(d,c){var a=[];Ext.each(d,function(e,g){if(e.iconCls&&"function"===typeof(e.callback||e.cb)){this.callbacks=this.callbacks||{};this.callbacks[e.iconCls]=e.callback||e.cb}var h={cls:e.iconIndex?"{"+e.iconIndex+"}":(e.iconCls?e.iconCls:""),qtip:e.qtipIndex?"{"+e.qtipIndex+"}":(e.tooltip||e.qtip?e.tooltip||e.qtip:""),text:e.textIndex?"{"+e.textIndex+"}":(e.text?e.text:""),hide:e.hideIndex?'<tpl if="'+e.hideIndex+'">'+("display"===this.hideMode?"display:none":"visibility:hidden")+";</tpl>":(e.hide?("display"===this.hideMode?"display:none":"visibility:hidden;"):""),align:e.align||"right",style:e.style?e.style:""};a.push(h)},this);var b=new Ext.XTemplate(c||this.tplRow);return new Ext.XTemplate(b.apply({actions:a}))},getAction:function(c){var b=false;var a=c.getTarget(".ux-row-action-item");if(a){b=a.className.replace(/ux-row-action-item /,"");if(b){b=b.replace(/ ux-row-action-text/,"");b=b.trim()}}return b},onClick:function(h,i){var j=this.grid.getView();var m=h.getTarget(".x-grid3-row");var a=j.findCellIndex(i.parentNode.parentNode);var c=this.getAction(h);if(false!==m&&false!==a&&false!==c){var g=this.grid.store.getAt(m.rowIndex);if(this.callbacks&&"function"===typeof this.callbacks[c]){this.callbacks[c](this.grid,g,c,m.rowIndex,a)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforeaction",this.grid,g,c,m.rowIndex,a)){return}else{if(true!==this.eventsSuspended){this.fireEvent("action",this.grid,g,c,m.rowIndex,a)}}}t=h.getTarget(".ux-grow-action-item");if(t){var k=j.findGroup(i);var d=k?k.id.replace(/ext-gen[0-9]+-gp-/,""):null;var b;if(d){var l=new RegExp(RegExp.escape(d));b=this.grid.store.queryBy(function(e){return e._groupId.match(l)});b=b?b.items:[]}c=t.className.replace(/ux-grow-action-item (ux-action-right )*/,"");if("function"===typeof this.callbacks[c]){this.callbacks[c](this.grid,b,c,d)}if(true!==this.eventsSuspended&&false===this.fireEvent("beforegroupaction",this.grid,b,c,d)){return false}this.fireEvent("groupaction",this.grid,b,c,d)}}});Ext.preg("rowactions",Ext.ux.grid.plugin.RowActions);Ext.ux.MessageBox=function(){f=function(){};f.prototype=Ext.MessageBox;var a=function(){};Ext.extend(a,f,function(){return{info:function(e,d,c,b){this.show({title:e,msg:d,minWidth:this.minWidth,icon:Ext.MessageBox.INFO});setTimeout(this.getDialog().close.createDelegate(this),2200);return this},error:function(e,d,c,b){this.show({title:e,msg:d,fn:c,scope:b,minWidth:this.minWidth,icon:Ext.MessageBox.ERROR});setTimeout(this.getDialog().close.createDelegate(this),2200);return this}}}());return new a()}();Ext.namespace("Ext.ux.tabpanel.plugin");Ext.ux.tabpanel.plugin.TabCloseMenu=function(){var a,c,b;this.init=function(e){a=e;a.on("contextmenu",d)};function d(i,h,j){if(!c){c=new Ext.menu.Menu([{id:a.id+"-close",text:"Close Tab",handler:function(){a.remove(b)}},{id:a.id+"-close-others",text:"Close Other Tabs",handler:function(){a.items.each(function(e){if(e.closable&&e!=b){a.remove(e)}})}}])}b=h;var g=c.items;g.get(a.id+"-close").setDisabled(!h.closable);var k=true;a.items.each(function(){if(this!=h&&this.closable){k=false;return false}});g.get(a.id+"-close-others").setDisabled(k);c.showAt(j.getPoint())}};Ext.preg("tabclosemenu",Ext.ux.tabpanel.plugin.TabCloseMenu);Ext.ux.IconMgr.setIconPath("/ExtjsGeneratorPlugin/Ext.ux.IconMgr");Ext.state.Manager.setProvider(new Ext.state.CookieProvider({expires:new Date(new Date().getTime()+(1000*60*60*24*7))}));if(typeof Ext==undefined||!Ext.hasBasex){throw"Ext and ext-basex 3.1 or higher required."}(function(){var A=Ext.lib.Ajax,StopIter="StopIteration",defined=function(test){return typeof test!=="undefined"},emptyFn=function(){};Ext.namespace("Ext.ux");Ext.ux.ModuleManager=function(config){Ext.apply(this,config||{},{modulePath:function(){var d=location.href.indexOf("/")!=-1?"/":"\\";var u=location.href.split(d);u.pop();return u.join(d)+d}()});this.addEvents({loadexception:true,alreadyloaded:true,load:true,beforeload:true,complete:true,timeout:true});Ext.ux.ModuleManager.superclass.constructor.call(this)};var gather=function(method,url,callbacks,data,options){var tag,attribs;callbacks||(callbacks={});if(method=="SCRIPT"){tag=method;attribs={type:"text/javascript",src:url}}else{if(method=="LINK"){tag=method;attribs={rel:"stylesheet",type:"text/css",href:url}}}return tag?A.monitoredNode(tag,attribs,callbacks,options.target||window):A.request.apply(A,arguments)};var modulate=function(moduleName,options){if(!moduleName){return null}options||(options={});var mname=String(moduleName.name||moduleName),name=mname.trim().split("/").last(),fname=options?(name.indexOf(".")!==-1?mname:mname+".js"):"",path=options.path||"";var mod=Ext.apply({name:name,fullName:moduleName.name?moduleName.name:fname,extension:!moduleName.name?fname.split(".").last().trim().toLowerCase():"",path:path},options);mod.url=options.url||(path+fname);return mod};Ext.extend(Ext.ux.ModuleManager,Ext.util.Observable,{disableCaching:false,modules:{},method:"GET",noExecute:false,asynchronous:true,cacheResponses:false,timeout:30000,debug:false,loadStack:new Array(),loaded:function(name){var module;return(module=this.getModule(name))?module.loaded===true:false},getModule:function(name){name&&(name=name.name?name.name:modulate(name,false).name);return name?this.modules[name]:null},createModule:function(name,extras){var mod,existing;mod=(existing=this.getModule(name))||modulate(name,extras);return existing||(this.modules[mod.name]=Ext.apply({executed:false,contentType:"",content:null,loaded:false,pending:false},mod));if(!mod){var m=modulate(name,extras);mod=this.modules[m.name]=Ext.apply({executed:false,contentType:"",content:null,loaded:false,pending:false},m)}return mod},onAvailable:function(modules,callbackFn,scope,timeout,options){if(arguments.length<2){return false}var MM=this,block={modules:new Array().concat(modules),poll:function(){var depends=(window.$JIT?$JIT.depends:null)||{};var assert=this.polling?this.modules.every(function(arg,index,args){var modName=arg.replace("@",""),virtual=false,test=true;if(depends[modName]&&((virtual=depends[modName].virtual||false)||(Ext.isArray(depends[modName].depends&&!!depends[modName].length)))){test=depends[modName].depends.every(arguments.callee);test=virtual?test&&((MM.getModule(modName)||{}).loaded=true):test}test=test&&(virtual||MM.loaded(modName)===true);block.pendingModule=test?null:MM.getModule(modName);return test}):false;if(!assert&&this.polling&&!this.aborted){this.poll.defer(50,this);return}this.stop();Ext.isFunction(callbackFn)&&callbackFn.call(scope,assert,this.timedOut,this.pendingModule)},polling:false,abort:function(){this.aborted=true;this.stop()},stop:function(){this.polling=false;this.timer&&clearTimeout(this.timer);this.timer=null},timer:null,timeout:parseInt(timeout||MM.timeout,10)||10000,onTimeout:function(){this.timedOut=true;this.abort()},retry:function(timeout){this.stop();this.polling=true;this.aborted=this.timedOut=false;this.timer=this.onTimeout.defer(timeout||this.timeout,this);this.poll();return this}};return block.retry()},provides:function(){forEach(arguments,function(module){var moduleObj=this.createModule(module,false);moduleObj.loaded||Ext.apply(moduleObj,{executed:moduleObj.extension==="js",contentType:"",content:null,loaded:true,pending:false})},this)},load:function(modList){try{var task=new Task(this,Ext.isArray(modList)?modList:Array.slice(arguments,0));task.start()}catch(ex){if(ex!=StopIter){if(task){task.lastError=ex;task.active=false}this.fireEvent("loadexception",this,task?task.currentModule:null,this.lastError=ex)}}return task},globalEval:function(data,scope,context){scope||(scope=window);data=String(data||"").trim();if(data.length===0){return false}try{if(scope.execScript){scope.execScript(data.replace(/^<!--/,"").replace(/-->$/,""))}else{eval.call(scope,data,context||null)}return true}catch(ex){return ex}},styleAdjust:null,applyStyle:function(module,styleRules,target){var rules;if(module=this.getModule(module)){var doc=(target||window).document;var ct=(styleRules||(module.content?module.content.text:"")||"")+"";var head;if(doc&&!!ct.length&&(head=doc.getElementsByTagName("head")[0])){if(module.element){this.removeModuleElement(module)}if(this.styleAdjust&&this.styleAdjust.pattern){ct=ct.replace(this.styleAdjust.pattern,this.styleAdjust.replacement||"")}rules=doc.createElement("style");module.element=Ext.get(rules);A._domRefs.push(module.element);rules.setAttribute("type","text/css");if(Ext.isIE){head.appendChild(rules);rules.styleSheet.cssText=ct}else{try{rules.appendChild(doc.createTextNode(ct))}catch(e){rules.cssText=ct}head.appendChild(rules)}}}return rules},removeStyle:function(module){return this.removeModuleElement(module)},removeModuleElement:function(module){var el;if(module=this.getModule(module)){if(el=module.element){el.dom?el.removeAllListeners().remove(true):Ext.removeNode(el)}module.element=el=null}},destroy:function(){forEach(this.modules,function(module,name){this.removeModuleElement(name);delete this.modules[name]},this)}});var Task=Ext.ux.ModuleManager.Task=function(MM,modules){Ext.apply(this,{result:true,active:false,options:null,executed:new Array(),loaded:new Array(),params:null,data:null,oav:null,timedOut:false,unlisteners:new Array(),MM:MM,id:Ext.id(null,"mm-task-"),defOptions:{async:MM.asynchronous,headers:MM.headers||false,modulePath:MM.modulePath,forced:false,cacheResponses:MM.cacheResponses,method:(MM.noExecute||MM.cacheResponses?"GET":MM.method||"GET").toUpperCase(),noExecute:MM.noExecute||false,disableCaching:MM.disableCaching,timeout:MM.timeout,callback:null,scope:null,params:null}});this.prepare(modules)};Ext.apply(Task.prototype,{start:function(){this.active=true;this.nextModule();if(this.options.async){this.oav=this.MM.onAvailable.call(this.MM,this.onAvailableList,this.onComplete,this,this.options.timeout,this.options)}else{this.onComplete(this.result)}},doCallBacks:function(options,success,currModule,args){var cb,C;if(C=currModule){var res=this.timedOut||this.MM.fireEvent.apply(this.MM,[(success?"load":"loadexception"),this.MM,C].concat(args||[]));success||(this.active=(!this.timedOut&&res!==false));if(this.active&&Ext.isArray(C.notify)){forEach(C.notify,function(chain,index,chains){if(chain){chain.nextModule();chains[index]=null}});C.notify=[]}if(C.element&&!options.debug&&C.extension=="js"&&options.method=="DOM"){C.element.removeAllListeners();var d=C.element.dom;if(Ext.isIE){A.SCRIPTTAG_POOL.push(C.element)}else{C.element.remove();if(d){for(var prop in d){delete d[prop]}}}d=null;delete C.element}}},success:function(response,ev,target){var module=response.argument.module.module,opt=response.argument.module,executable=(!opt.proxied&&module.extension=="js"&&!opt.noExecute&&opt.method!=="DOM"),cbArgs=null,MM=this.MM;module=MM.getModule(module.name);this.currentModule=module.name;if(!module.loaded){try{if(MM.fireEvent("beforeload",MM,module,response,response.responseText)!==false){Ext.apply(module,{loaded:true,pending:false,contentType:response.contentType||(target&&Ext.fly(target)?Ext.fly(target).getAttributeNS(null,"type"):""),content:opt.cacheResponses||module.extension=="css"?{text:response.responseText||null,XML:response.responseXML||null,JSON:response.responseJSON||null,parts:response.parts}:null});this.loaded.push(module);var exception=executable&&(!module.executed||opt.forced)?MM.globalEval(response.responseText,opt.target):true;if(exception===true){if(executable){module.executed=true;this.executed.push(module)}cbArgs=[response,response.responseText,module.executed]}else{throw Ext.applyIf({fileName:module.url,lineNumber:exception.lineNumber||0},exception)}}}catch(exl){cbArgs=[{error:(this.lastError=exl),httpStatus:response.status,httpStatusText:response.statusText}];this.result=false}this.doCallBacks(opt,this.result,module,cbArgs)}else{opt.async&&this.nextModule()}},failure:function(response){var module=response.argument.module.module,opt=response.argument.module;module.contentType=response.contentType||"";this.currentModule=module.name;this.result=module.pending=false;this.doCallBacks(opt,this.result=false,module,[{error:(this.lastError=response.fullStatus.error),httpStatus:response.status,httpStatusText:response.statusText}])},nextModule:function(){var module,transport,executable,options,url;while(this.active&&(module=this.workList.shift())){if(Ext.isFunction(module)){module.apply(this,[this.result,null,this.loaded]);continue}if(module.listeners){this.unlisteners.push(module.listeners);this.MM.on(module.listeners);delete module.listeners}var params=null,data=null,moduleObj;options=module;if(params=module.params){Ext.isFunction(params)&&(params=params.call(options.scope||window,options));(Ext.isObject(params)||Ext.isObject(params))&&(params=Ext.urlEncode(params));module.params=data=params}if(moduleObj=this.MM.createModule(module.module,{path:options.modulePath})){url=moduleObj.url;executable=(!options.proxied&&moduleObj.extension=="js"&&!options.noExecute);if((!moduleObj.loaded)||options.forced){if(!moduleObj.pending){moduleObj.pending=true;if(/get|script|dom|link/i.test(options.method)){url+=(params?"?"+params:"");if(options.disableCaching==true){url+=(params?"&":"?")+"_dc="+(new Date().getTime())}data=null}options.async=options.method==="DOM"?true:options.async;transport=gather(options.method=="DOM"?(moduleObj.extension=="css"?"LINK":"SCRIPT"):options.method,url,options.callback={success:this.success,failure:this.failure,scope:this,argument:{module:module}},data,options);Ext.apply(moduleObj,{element:options.method=="DOM"?transport:null,method:options.method||this.method,options:options})}if(options.async){break}}else{this.active=this.MM.fireEvent("alreadyloaded",this.MM,moduleObj)!==false;executable&&this.executed.push(moduleObj);this.loaded.push(moduleObj)}}}if(this.active&&module&&module.async&&moduleObj){moduleObj.notify||(moduleObj.notify=new Array());moduleObj.notify.push(this)}},prepare:function(modules){var onAvailableList=new Array(),workList=new Array(),options=this.defOptions,mtype,MM=this.MM;var adds=new Array();var expand=function(mods){mods=new Array().concat(mods);var adds=new Array();forEach(mods,function(module){if(!module){return}var m;mtype=typeof(module);switch(mtype){case"string":m=MM.createModule(module,{path:options.modulePath,url:module.url||null});if(!m.loaded){module=Ext.applyIf({name:m.name,module:m,callback:null},options);delete options.listeners;workList.push(module);adds.push(module)}onAvailableList.push(m.name);break;case"object":if(m=(module.modules||module.module)){adds=expand(m);delete module.module;delete module.modules}if(module.proxied){module.method="GET";module.cacheResponses=module.async=true}if(Ext.isArray(module)){adds=expand(module)}else{var mod=module;if(module.name){m=MM.createModule(module,{path:options.modulePath,url:mod.url||null});delete mod.url;Ext.apply(options,mod);if(!m.loaded){mod=Ext.applyIf({name:m.name,module:m,callback:null},options);delete options.listeners;workList.push(mod);adds.push(mod)}onAvailableList.push(m.name)}else{Ext.apply(options,mod)}}break;case"function":workList.push(module);default:}});return adds};expand(modules);this.options=options;this.workList=workList.flatten().compact();this.onAvailableList=onAvailableList.flatten().unique()},onComplete:function(loaded,timedOut,lastModule){var cb=this.options.callback,MM=this.MM;this.timedOut=!!timedOut;if(loaded){cb&&cb.apply(this.options.scope||this,[this.result,this.loaded,this.executed]);MM.fireEvent("complete",MM,this.result,this.loaded,this.executed)}else{if(this.active&&this.timedOut){cb&&cb.apply(this.options.scope||this,[this.result,this.loaded,this.executed]);MM.fireEvent("timeout",MM,lastModule,this.executed)}}if(this.unlisteners){forEach(this.unlisteners,function(block){forEach(block,function(listener,name,listeners){var fn=listener.fn||listener;var scope=listener.scope||listeners.scope||this.MM;var ev=listener.name||name;this.MM.removeListener(ev,fn,scope)},this)},this)}this.active=false}});Ext.lib.Ajax.forceActiveX=(Ext.isIE7&&document.location.protocol=="file:");var L=Ext.Loader=new Ext.ux.ModuleManager({modulePath:"",method:"DOM",depends:{},disableCaching:true,getMap:function(module){var result=new Array(),mods=new Array().concat(module.module||module);var options=Ext.isObject(module)?module:{module:module};forEach(mods,function(mod){var c=arguments.callee;var moduleName=Ext.isObject(mod)?mod.module||null:mod;var map=moduleName?this.depends[moduleName.replace("@","")]||false:false;map=Ext.apply({path:"",depends:false},map);forEach(map.depends||new Array(),function(module,index,dep){module.substr(0,1)=="@"?c.call(this,module):(result=result.concat(module))},this);if(moduleName&&!(map.none||map.virtual)){result=result.concat((map.path||"")+moduleName.replace("@",""))}},this);return Ext.applyIf({module:!!result.length?result.unique():null},options)},styleAdjust:{pattern:/url\(\s*\.\.\//ig,replacement:"url(resources/"}});$JIT=function(){var modules=new Array();forEach(Array.slice(arguments,0),function(module){modules=modules.concat(typeof module=="function"?module:L.getMap(module))},L);L.load.apply(L,modules.flatten());return L};Ext.ux.$JIT=Ext.require=$JIT;var on=L.addListener.createDelegate(L),un=L.removeListener.createDelegate(L);Ext.apply($JIT,{onAvailable:Ext.Loader.onAvailable.createDelegate(L),onClassAvailable:(function(){var options=null;var F=function OCAV(classList,callback,scope,timeout){var o,d,classes=[],opt={interval:100,retries:(timeout||30000)/100,callback:callback||Ext.emptyFn,scope:scope||null};if(!options){options=Ext.clone(opt)}Ext.each([].concat(classList||[]).compact(),function(v){if(Ext.isString(v)){d=v.split(".");if(o=window[d[0]]){Ext.each(d.slice(1),function(next){return !!(o=o[next])});o&&classes.push(o)}else{return false}}});var C=classes.compact();C=C.length<2?C.first():C;if(!!o){options.callback.call(options.scope,true,C)}else{if(--options.retries){arguments.callee.defer(options.interval,this,arguments);return}else{options.callback.call(options.scope,false,C)}}options=null};var OCAV=null;return F})(),provide:Ext.provide=L.provides.createDelegate(L),on:on,addListener:on,un:un,removeListener:un,depends:L.depends,loaded:L.loaded.createDelegate(L),getModule:L.getModule.createDelegate(L),setMethod:function(method){L.method=(method||"DOM").toUpperCase()},setModulePath:function(path){L.modulePath=path||""},execScript:L.globalEval.createDelegate(L),lastError:function(){return L.lastError},setTimeout:function(tmo){L.timeout=parseInt(tmo||0,10)},applyStyle:L.applyStyle.createDelegate(L),removeStyle:L.removeStyle.createDelegate(L),css:L.load.createDelegate(L,[{method:"GET",cacheResponses:true,modulePath:""}],0),script:L.load.createDelegate(L,[{method:"DOM",modulePath:""}],0),get:L.load.createDelegate(L,[{method:"GET",modulePath:""}],0),post:L.load.createDelegate(L,[{method:"POST",modulePath:""}],0),getCached:L.load.createDelegate(L,[{method:"GET",modulePath:"",cacheResponses:true}],0)});$JIT.provide("jit","ext-basex");var mgr=Ext.ComponentMgr,load_options={async:false,method:"GET",callback:function(completed){!completed&&L.fireEvent("loadexception",L,this.currentModule,"Ext.ComponentMgr:$JIT Load Failure")},scope:L},assert=function(rm){return !!rm&&typeof rm=="object"?Ext.apply({},load_options,rm):rm};if(mgr){$JIT.create=Ext.create=mgr.create=mgr.create.createInterceptor(function(config,defaultType){var require=config.require||config.JIT;if(!!require){require=[load_options].concat(require).map(assert).compact();Ext.require.apply(Ext,require)}})}})();